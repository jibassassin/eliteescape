<!DOCTYPE html>
<html>
<head>
    <title>Test JavaScript Admin</title>
    <script src="catamaran-config.js"></script>
</head>
<body>
    <h1>Test JavaScript Admin</h1>
    <div id="result"></div>
    
    <script>
    function log(message) {
        document.getElementById('result').innerHTML += '<p>' + message + '</p>';
        console.log(message);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        try {
            log('=== TEST JAVASCRIPT ===');
            
            // Test 1: Verifica se CatamaranStorage funziona
            if (typeof CatamaranStorage !== 'undefined') {
                log('✓ CatamaranStorage disponibile');
                
                const config = CatamaranStorage.load();
                log('✓ Config caricata: ' + config.basic.name);
            } else {
                log('✗ CatamaranStorage NON disponibile');
            }
            
            // Test 2: Simula il caricamento della pagina admin
            log('\n--- Simulazione DOMContentLoaded ---');
            log('✓ DOMContentLoaded funziona');
            
            // Test 3: Test getElementById (simula gli ID che dovrebbero esistere)
            log('\n--- Test getElementById ---');
            const testDiv = document.getElementById('result');
            log(testDiv ? '✓ getElementById funziona' : '✗ getElementById NON funziona');
            
        } catch (error) {
            log('✗ ERRORE: ' + error.message);
            log('Stack: ' + error.stack);
        }
    });
    
    // Test 4: Test diretto senza DOMContentLoaded
    try {
        console.log('Test JavaScript immediato - OK');
    } catch (error) {
        console.error('Errore JavaScript immediato:', error);
    }
    </script>
</body>
</html>